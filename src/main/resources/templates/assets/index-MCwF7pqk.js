var B=Object.defineProperty;var D=(t,s,r)=>s in t?B(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var p=(t,s,r)=>(D(t,typeof s!="symbol"?s+"":s,r),r);import{m as v,u as $,r as h,j as e,I as V,c as P,a as z,b as F,F as m,t as W,g as q,d as H,e as U,f as G,h as M,T as y,i as K,k as J,E as Y,D as Q,M as I,l as X,S as Z,n as S,C as ee,B as te,o as se,p as ae,q as re,s as ne,R as oe,v as le,w as ie,x as ce,y as de,L,H as ue,z as T,A as me,G as he,J as O,K as fe,N as ge,O as b}from"./vendor-AUb_t5Eg.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}})();const xe="modulepreload",je=function(t){return"/"+t},R={},w=function(s,r,l){let a=Promise.resolve();if(r&&r.length>0){const n=document.getElementsByTagName("link");a=Promise.all(r.map(o=>{if(o=je(o),o in R)return;R[o]=!0;const d=o.endsWith(".css"),x=d?'[rel="stylesheet"]':"";if(!!l)for(let c=n.length-1;c>=0;c--){const i=n[c];if(i.href===o&&(!d||i.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${x}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":xe,d||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),d)return new Promise((c,i)=>{u.addEventListener("load",c),u.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${o}`)))})}))}return a.then(()=>s()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})},_="http://localhost:9981/api",C=async(t,s,r)=>{try{const l=await window.fetch(`${_}${t}`,{method:s,...r&&{body:typeof r=="string"?r:JSON.stringify(r)},headers:{"Content-Type":"application/json"}}),a=await l.json();if(l.status!==200)throw new Error(a==null?void 0:a.data);return a.data}catch(l){throw v.error(l==null?void 0:l.message),l}},be=t=>fetch(t,{method:"GET"}).then(s=>s.text()).then(s=>s.replace(/\[1m/g,"").replace(/\\x1B/g,"").replace(/\[22m/g,"").replace(/\[32m/g,"").replace(/\[33m/g,"").replace(/\[39m/g,"").replace(//g,"").replace(/(\x00)+/g,`
`)),pe=(t,s={})=>$(t?`${_}/${t.startsWith("/")?t.slice(1):t}`:void 0,{revalidateIfStale:!1,revalidateOnMount:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,...s});async function Me(t){switch(t){case"zh-cn":return(await w(()=>import("./zh-cn-dvsiyqV4.js"),__vite__mapDeps([]))).default;case"en-us":return(await w(()=>import("./en-us-aJY6SYEB.js"),__vite__mapDeps([]))).default;default:{const s=t;throw new Error(s)}}}const N=h.createContext(void 0);function ve(){const t=h.useContext(N);if(t===void 0)throw new Error("useLocale must be used within the LocaleProvider context");return t}class ye{constructor(){p(this,"currentLocale",null);p(this,"cache",z());p(this,"currentIntl",P({locale:"zh-cn",messages:{}},this.cache));p(this,"currentMessages",null)}get locale(){return this.currentLocale}get intl(){return this.currentIntl}get messages(){return this.currentMessages}update(s,r){this.currentIntl=P({locale:s,messages:r},this.cache),this.currentLocale=s,this.currentMessages=r}}const g=new ye;function Se({children:t,fallback:s,defaultLocale:r}){const[l,a]=h.useState(null),[n,o]=h.useState(r);h.useLayoutEffect(()=>{async function x(){const j=await Me(n);g.update(n,j),a(j),document.documentElement.lang=n}x()},[n]);const d=h.useMemo(()=>({locale:n,setLocale:o}),[n]);return e.jsx(N.Provider,{value:d,children:l?e.jsx(V,{locale:n,messages:l,children:t}):s})}const E="/processStatus",Le=()=>[{dataIndex:"name",title:g.intl.formatMessage({id:"LogStatusName",defaultMessage:"日志状态名称"})},{dataIndex:"label",title:g.intl.formatMessage({id:"LogStatusLabel",defaultMessage:"日志状态标签"}),render:(t,s)=>e.jsx("span",{style:{color:s.color},children:t})},{dataIndex:"matchers",title:g.intl.formatMessage({id:"LogStatusMatchingRule",defaultMessage:"日志状态匹配规则"}),render:t=>e.jsx(e.Fragment,{children:t.map(s=>e.jsx("div",{children:s}))})},{dataIndex:"clear",title:g.intl.formatMessage({id:"WhetherToClearThePreviousLogIn_",defaultMessage:"当前状态是否清除之前日志"}),render:t=>t?g.intl.formatMessage({id:"ClearLog",defaultMessage:"清除日志"}):g.intl.formatMessage({id:"DoNotClearTheLog",defaultMessage:"不清除日志"})}];function Ee(){const t=F(),{data:s,mutate:r,isLoading:l}=pe(E),[a]=m.useForm(),[n,o]=h.useState(!1),d=Le(),x=(c=re)=>Object.entries(c).map(([i,f])=>({label:i,colors:f})),{token:j}=W.useToken(),u=x({primary:q(j.colorPrimary),red:H,green:U,blue:G});return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center h-8 ",children:[e.jsx("h2",{className:"mr-auto",children:e.jsx(M,{id:"LogStatusManagement",defaultMessage:"日志状态管理"})}),e.jsx(y,{title:t.formatMessage({id:"AddLogStatus",defaultMessage:"增加日志状态"}),placement:"leftBottom",children:e.jsx(K,{onClick:()=>{a.resetFields(),o(!0)}})})]}),s!==void 0&&e.jsx(J,{rowKey:"id",dataSource:s,loading:l,pagination:!1,columns:[...d,{title:t.formatMessage({id:"Operation",defaultMessage:"操作"}),render:(c,i)=>e.jsxs("div",{className:"space-x-5",children:[e.jsx(y,{title:t.formatMessage({id:"EditProject",defaultMessage:"编辑项目"}),children:e.jsx(Y,{onClick:()=>{a.setFieldsValue(i),o(!0)}})}),e.jsx(y,{title:t.formatMessage({id:"DeleteLogStatusConfiguration",defaultMessage:"删除日志状态配置"}),children:e.jsx(Q,{onClick:()=>{I.confirm({title:t.formatMessage({id:"DoYouWantToDeleteTheProject",defaultMessage:"是否删除?"}),icon:e.jsx(X,{}),onOk(){C(`${E}/${i.id}`,"DELETE").then(()=>{v.success(t.formatMessage({id:"DeletedSuccessfully",defaultMessage:"删除成功"})),r()})}})}})})]})}]}),e.jsxs(I,{open:n,title:a.getFieldValue("id")===void 0?t.formatMessage({id:"CreateANewProject",defaultMessage:"新建项目"}):t.formatMessage({id:"EditProject",defaultMessage:"编辑项目"}),okButtonProps:{autoFocus:!0,htmlType:"submit"},onCancel:()=>o(!1),destroyOnClose:!0,modalRender:c=>e.jsx(m,{layout:"vertical",form:a,name:"form_in_modal",onFinish:i=>{const f=a.getFieldValue("id");C(E,f?"PUT":"POST",{...i,id:f}).then(()=>{v.success(t.formatMessage({id:"OperationSuccessful",defaultMessage:"操作成功"})),o(!1),r()})},children:c}),children:[e.jsx(m.Item,{name:"matchers",label:t.formatMessage({id:"MatchingRule",defaultMessage:"匹配规则"}),rules:[{required:!0,message:t.formatMessage({id:"FolderAddressCannotBeEmpty",defaultMessage:"文件夹地址不能为空"}),validator:(c,i)=>{try{return new RegExp(i),Promise.resolve()}catch{return Promise.reject(new Error(t.formatMessage({id:"NotAValidRegularExpression",defaultMessage:"不是有效的正则表达式"})))}}}],children:e.jsx(m.List,{name:"matchers",children:(c,i)=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",rowGap:16},children:[c.map((f,A)=>e.jsxs(Z,{children:[e.jsx(m.Item,{noStyle:!0,name:A,children:e.jsx(S,{placeholder:"first"})}),e.jsx(ee,{onClick:()=>{i.remove(f.name)}})]},f.key)),e.jsx(te,{type:"dashed",onClick:()=>i.add(),block:!0,children:"+ Add Sub Item"})]})})}),e.jsx(m.Item,{name:"name",label:t.formatMessage({id:"Name",defaultMessage:"名称"}),children:e.jsx(S,{})}),e.jsx(m.Item,{name:"label",label:t.formatMessage({id:"LabelName",defaultMessage:"标签名"}),children:e.jsx(S,{})}),e.jsx(m.Item,{name:"color",label:t.formatMessage({id:"LabelColor",defaultMessage:"标签颜色"}),getValueFromEvent:c=>c.toHexString(),children:e.jsx(se,{presets:u})}),e.jsx(m.Item,{name:"clear",label:t.formatMessage({id:"WhetherToClearThePreviousLog",defaultMessage:"是否清除之前日志"}),valuePropName:"checked",children:e.jsx(ae,{})})]})]})}const{Option:k}=T,we=t=>fetch(t).then(s=>s.json().then(r=>r.data)),Ce=h.lazy(()=>w(()=>import("./index-vru0GTw6.js"),__vite__mapDeps([0,1,2]))),Pe=()=>{const t=F(),s=ie(),{locale:r,setLocale:l}=ve();return e.jsx(ce,{value:{fetcher:we,revalidateOnFocus:!0,revalidateOnMount:!0,revalidateOnReconnect:!0,revalidateIfStale:!1},children:e.jsx(de,{locale:{locale:"en-us"},theme:{token:{colorPrimary:"#7939cb",borderRadius:2,fontSize:16}},children:e.jsxs(L,{style:{minHeight:"100vh"},children:[e.jsxs(ue,{className:"text-white flex items-center",children:[e.jsx("div",{children:e.jsx(M,{id:"FrontendManagementSystem",defaultMessage:"前端管理系统"})}),e.jsx("div",{className:"ml-auto cursor-pointer",onClick:()=>{C("/system/shutdown","PUT").then(a=>{v.success(a)})},children:e.jsx(M,{id:"ShutdownSystem",defaultMessage:"关闭系统"})}),e.jsxs(T,{onChange:l,value:r,className:"ml-5 w-28",children:[e.jsx(k,{value:"en-us",children:"English"}),e.jsx(k,{value:"zh-cn",children:e.jsx(M,{id:"Chinese",defaultMessage:"中文"})})]})]}),e.jsxs(L,{children:[e.jsx(me,{children:e.jsx(he,{mode:"inline",onClick:a=>{s(a.key)},items:[{key:"processes",label:t.formatMessage({id:"Service",defaultMessage:"服务"}),icon:e.jsx(O,{})},{key:"logStatus",label:t.formatMessage({id:"LogStatus",defaultMessage:"日志状态"}),icon:e.jsx(O,{})}]})}),e.jsx(L,{children:e.jsx(fe,{children:e.jsx(h.Suspense,{fallback:e.jsx("div",{children:"loading"}),children:e.jsx("div",{className:"ml-4 mr-4",children:e.jsxs(ge,{children:[e.jsx(b,{path:"/processes",element:e.jsx(Ce,{})}),e.jsx(b,{path:"/logStatus",element:e.jsx(Ee,{})})]})})})})})]})]})})})};ne(document.getElementById("root")).render(e.jsx(oe.StrictMode,{children:e.jsx(le,{children:e.jsx(Se,{defaultLocale:"zh-cn",children:e.jsx(Pe,{})})})}));export{be as a,_ as b,Le as c,g as i,C as j,E as s,pe as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-vru0GTw6.js","assets/vendor-AUb_t5Eg.js","assets/index-ubpXYuuh.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
